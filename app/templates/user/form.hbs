<form class="form-horizontal">
  <div class="panel panel-default">
    {{#unless model.isNew}}
      <div class="panel-heading">
        <h3 class="panel-title">
          {{t 'user.form.title'}}
        </h3>
      </div>
    {{/unless}}
    <div class="panel-body">
      <div class="form-group {{if model.fieldErrors.firstName.length 'has-error'}}">
        <label for="firstName" class="col-sm-2 control-label">{{t 'user.form.firstName.label'}}</label>

        <div class="col-sm-10">
          {{#if canEditName}}
            {{input type="text" name="firstName" value=model.firstName class="form-control"}}
            {{error-display errors=model.fieldErrors.firstName}}
          {{else}}
            <p class="form-control-static">{{model.firstName}}</p>
          {{/if}}
        </div>
      </div>
      <div class="form-group {{if model.fieldErrors.lastName.length 'has-error'}}">
        <label for="lastName" class="col-sm-2 control-label">{{t 'user.form.lastName.label'}}</label>

        <div class="col-sm-10">
          {{#if canEditName}}
            {{input type="text" name="lastName" value=model.lastName class="form-control"}}
            {{error-display errors=model.fieldErrors.lastName}}
          {{else}}
            <p class="form-control-static">{{model.lastName}}</p>
          {{/if}}
        </div>
      </div>
      <div class="form-group {{if model.fieldErrors.birthDate.length 'has-error'}}">
        <label for="birthDate" class="col-sm-2 control-label">{{t 'user.form.birthDate.label'}}</label>

        <div class="col-sm-10">
          {{#if canEditBirthDate}}
            {{date-picker selectedDate=selectedDate dateSelected='dateSelected'}}
            {{error-display errors=model.fieldErrors.birthDate}}
            {{error-display errors=fieldErrors.model.birthDate}}
          {{else}}
            <p class="form-control-static">{{moment-format model.birthDate}}</p>
          {{/if}}
        </div>
      </div>
      <div class="form-group {{if model.fieldErrors.email.length 'has-error'}}">
        <label for="email" class="col-sm-2 control-label">{{t 'literal.email'}}</label>

        <div class="col-sm-10">
          {{input type="email" name="email" value=model.email class="form-control"}}
          {{error-display errors=model.fieldErrors.email}}
        </div>
      </div>
      {{#if model.isNew}}
        <div class="form-group {{if model.fieldErrors.password.length 'has-error'}}">
          <label for="password" class="col-sm-2 control-label">{{t 'literal.password'}}</label>

          <div class="col-sm-10">
            {{input type="password" name="password" value=model.password class="form-control"}}
            {{error-display errors=model.fieldErrors.password}}
          </div>
        </div>
      {{/if}}
      {{#if model.isNew}}
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <div class="checkbox">
              <label>
                {{input type="checkbox" name="termsOk" checked=termsOk}}
                {{t 'user.form.termsOk.label'}}
              </label>
            </div>
            <div class="checkbox">
              <label>
                {{input type="checkbox" name="insuranceOk" checked=insuranceOk}}
                {{t 'user.form.insuranceOk.label'}}
              </label>
            </div>
          </div>
        </div>
        <div class="form-group mbx">
          <div class="col-sm-offset-2 col-sm-10">
            <button {{action "saveUser"}} class="btn btn-primary" disabled={{model.isSaving}}>
                {{t 'user.form.register'}}
            </button>
          </div>
        </div>
      {{/if}}
    </div>
  </div>

  {{#unless model.isNew}}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">{{t 'user.form.preferredLanguage'}}</h3>
      </div>
      <div class="panel-body">
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
              {{#radio-button classNames="radio-inline" value="fr" groupValue=model.locale}}
                Fran√ßais
              {{/radio-button}}
              {{#radio-button classNames="radio-inline" value="en" groupValue=model.locale}}
                English
              {{/radio-button}}
          </div>
        </div>
        <div class="col-sm-offset-2 col-sm-10">
          <span class="form-details">
            {{t 'user.form.localeDetails'}}
          </span>
        </div>
      </div>
    </div>
  {{/unless}}

  {{#if sessionUser.user.isAdmin}}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">{{t 'literal.admins'}}</h3>
      </div>
      <div class="panel-body">
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <div class="checkbox">
              <label>
                {{input type="checkbox" name="isHidden" checked=model.isSuspended}}
                {{t 'user.form.isSuspended.label'}}
              </label>
            </div>
          </div>
        </div>
        <div class="col-sm-offset-2 col-sm-10">
          <span class="form-details">
            {{t 'user.form.isSuspendedDetails'}}
          </span>
        </div>
      </div>
    </div>
  {{/if}}

  {{#unless model.isNew}}
    <div class="form-group">
      <div class="col-xs-12">
        <button {{action "saveUser"}} class="btn btn-primary" disabled={{model.isSaving}}>
            {{t 'literal.save'}}
        </button>
      </div>
    </div>
  {{/unless}}
</form>
