<div class="page-header">
    <h1>
        My Memberships
    </h1>
</div>

<div class="row">
    <div class="col-md-6">
        <h4>Wwoofer Memberships</h4>
        {{#if hasWwoofMemberships}}
            {{#unless latestWwoofMembership.isStillValidInAMonth}}
                <div class="alert alert-warning alert-dismissable" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                    <span class="glyphicon glyphicon-exclamation-sign"></span>
                    {{#if latestWwoofMembership.isExpired}}
                        Your wwoofer membership is expired since {{format-date latestWwoofMembership.expireAt}}.
                    {{else}}
                        Your wwoofer membership will expire {{format-date latestWwoofMembership.expireAt}}.
                    {{/if}}
                    To get access to all farms contact information, you must
                    {{#link-to 'wwoofer.membership' controllers.application.currentUser.wwoofer.id}}pay your membership fee{{/link-to}}.
                </div>
            {{/unless}}
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>Code</th>
                    <th>Payment</th>
                    <th>Amount</th>
                    <th>Expire At</th>
                </tr>
                </thead>
                <tbody>
                {{#each wwoofMemberships}}
                    <tr>
                        <td>{{itemCode}}</td>
                        <td>{{format-date createdAt}}</td>
                        <td>{{total}} Euro</td>
                        <td>{{format-date expireAt}}</td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
            <i>You may renew your membership 30 days before it expires.</i>
        {{else}}
            You've never taken a membership as a Wwoofer.
        {{/if}}
    </div>
    <div class="col-md-6">
        <h4>Host Memberships</h4>
        {{#if hasHostMemberships}}
            {{#if latestHostMembership.isExpired}}
                <div class="alert alert-warning alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert">
                        <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
                    </button>
                    <strong><span class="glyphicon glyphicon-exclamation-sign"></span></strong>
                    Your host membership is expired since {{format-date latestHostMembership.expireAt}}.
                    Renew your membership to appear in the host listing.
                </div>
            {{/if}}
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>Code</th>
                    <th>Payment</th>
                    <th>Amount</th>
                    <th>Expire At</th>
                </tr>
                </thead>
                <tbody>
                {{#each hostMemberships}}
                    <tr>
                        <td>{{itemCode}}</td>
                        <td>{{format-date createdAt}}</td>
                        <td>{{total}} Euro</td>
                        <td>{{format-date expireAt}}</td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
            <p>
                <button {{action "renewHostMembership"}} {{bind-attr disabled="latestHostMembership.isStillValidInAMonth"}}
                        class="btn btn-primary">Renew Membership
                </button>
                <i>You may renew your membership 30 days before it expires.</i>
            </p>
        {{else}}
            You've never taken a membership as a Host.
        {{/if}}
    </div>
</div>