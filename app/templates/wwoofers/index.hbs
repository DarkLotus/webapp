<div class="col-md-10 col-md-offset-1">
    <div class="page-header">
        <h1>
            {{t 'wwoofers.index.title'}}
        </h1>
    </div>

    <div class="row mbm">
        <div class="col-xs-12">
            <p>
                {{t 'wwoofers.index.instructions'}}
            </p>
            <form class="form-inline">
                <div class="form-group">
                    <label for="searchTerm" class="sr-only">{{t 'literals.search'}}</label>
                    {{input type="text" class="form-control" id="searchTerm" placeholderTranslation="wwoofers.index.search.placeholder" value=searchTerm action="searchWwoofers"}}
                </div>
                <div class="form-group">
                    <label for="country" class="sr-only">{{t 'address.form.country.label'}}</label>
                    {{view "select"
                    content=controllers.countries.content
                    optionValuePath="content.id"
                    optionLabelPath="content.name"
                    value=country
                    class="form-control"
                    name="country"
                    promptTranslation='wwoofers.index.country.prompt'}}
                </div>
                <button {{action "searchWwoofers"}} {{bind-attr disabled=isLoading}} class="btn btn-primary btn-lg">
                    {{t 'literal.search'}}
                </button>
            </form>
        </div>
    </div>

    <div class="row mbm">
        <div class="col-xs-12">
            {{#if isLoading}}
                {{partial 'loading'}}
            {{else}}
                {{#if content}}
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>{{t 'wwoofers.index.firstName'}}</th>
                                    <th>{{t 'wwoofers.index.lastName'}}</th>
                                    <th>{{t 'literal.email'}}</th>
                                    <th class="hidden-xs hidden-sm">{{t 'wwoofers.index.city'}}</th>
                                    <th class="hidden-xs hidden-sm">{{t 'wwoofers.index.country'}}</th>
                                    <th>{{t 'wwoofers.index.actions'}}</th>
                                </tr>
                            </thead>
                            <tbody>
                            {{#each wwoofer in this}}
                                <tr>
                                    <td>{{wwoofer.user.firstName}}</td>
                                    <td>{{wwoofer.user.lastName}}</td>
                                    <td>{{wwoofer.user.email}}</td>
                                    <td class="hidden-xs hidden-sm">{{wwoofer.address.city}}</td>
                                    <td class="hidden-xs hidden-sm">{{wwoofer.address.country.name}}</td>
                                    <td>
                                        {{#link-to "wwoofer" wwoofer.id}}{{t 'literal.view'}}{{/link-to}}
                                        {{#if session.user.isAdmin}}
                                            |
                                            {{#link-to "wwoofer.edit" wwoofer.id}}{{t 'literal.edit'}}{{/link-to}}
                                        {{/if}}
                                    </td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-4 col-md-2">
                            <button {{action "loadMoreWwoofers"}} {{bind-attr disabled=isLoadingMore}} class="btn btn-default btn-block">
                                {{t 'literal.loadMore'}}
                            </button>
                        </div>
                    </div>
                {{else}}
                    {{t 'wwoofers.index.noResults'}}
                    {{#if session.user.isAdmin}}
                        {{t 'wwoofers.index.noResultsNotAdmin'}}
                    {{/if}}
                {{/if}}
            {{/if}}
        </div>
    </div>
</div>
